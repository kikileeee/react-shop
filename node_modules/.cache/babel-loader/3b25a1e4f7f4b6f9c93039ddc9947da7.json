{"ast":null,"code":"import _slicedToArray from\"C:/Users/paulo/Desktop/React shop site/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Navbar from'../Homepage/Navbar/Navbar';import'./productInfo.scss';import{useLocation}from'react-router-dom';import{v4 as uuidv4}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductInfo=function ProductInfo(props){var location=useLocation();var product=location.state.product;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState('Guest'),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),inputComment=_useState6[0],setInputComment=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),updateCommentPanel=_useState8[0],setUpdateCommentPanel=_useState8[1];var port=process.env.PORT||'9000';useEffect(function(){if(JSON.parse(localStorage.getItem('userInfo'))!==null){setUser(JSON.parse(localStorage.getItem('userInfo')).username);}fetch(\"http://192.168.1.113:\".concat(port,\"/comment\"),{method:'POST',body:JSON.stringify(product),headers:{'Content-Type':'application/json'}}).then(function(response){return response.json().then(function(data){if(data.length){setComments(data);}});});},[updateCommentPanel]);function addComment(){var danas=new Date();var minutes=danas.getMinutes();minutes=minutes>9?minutes:'0'+minutes;var date=danas.getFullYear()+'-'+(danas.getMonth()+1)+'-'+danas.getDate()+' at '+danas.getHours()+\":\"+minutes;var dataComment={productid:product.productid,user:user,comment:inputComment,date:date};if(inputComment!=''){fetch(\"http://192.168.1.113:\".concat(port,\"/comment\"),{method:'PUT',body:JSON.stringify(dataComment),headers:{'Content-Type':'application/json'}}).then(function(response){return response.json().then(function(data){if(data.length){console.log(data);setComments(data);}});});}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{cartNumber:props.cartNumber,setCartNumber:props.setCartNumber}),/*#__PURE__*/_jsx(\"div\",{className:\"productInfo\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product.productName}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Current price: \",product.productPrice]}),/*#__PURE__*/_jsx(\"img\",{src:require(\"../Homepage/ProductShowcase/images/\".concat(product.productImage)),alt:\"\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"There is curently \",product.inStock,\" of this product in invetory\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputButton\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){setInputComment(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:addComment,children:\"Insert comment\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"commentPanel\",children:/*#__PURE__*/_jsx(\"div\",{className:\"generatedComments\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:require(\"./default.jpg\"),alt:\"\"}),/*#__PURE__*/_jsx(\"h2\",{children:comment.user}),/*#__PURE__*/_jsx(\"h4\",{children:comment.date})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.comment})]},uuidv4());})})})]})]});};export default ProductInfo;","map":{"version":3,"sources":["C:/Users/paulo/Desktop/React shop site/my-app/src/Components/ProductInfo/ProductInfo.jsx"],"names":["React","useEffect","useState","Navbar","useLocation","v4","uuidv4","ProductInfo","props","location","product","state","comments","setComments","user","setUser","inputComment","setInputComment","updateCommentPanel","setUpdateCommentPanel","port","process","env","PORT","JSON","parse","localStorage","getItem","username","fetch","method","body","stringify","headers","then","response","json","data","length","addComment","danas","Date","minutes","getMinutes","date","getFullYear","getMonth","getDate","getHours","dataComment","productid","comment","console","log","cartNumber","setCartNumber","productName","productPrice","require","productImage","inStock","e","target","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Navbar from '../Homepage/Navbar/Navbar'\r\nimport './productInfo.scss'\r\nimport { useLocation } from 'react-router-dom';\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\n\r\nconst ProductInfo = (props) => {\r\n  const location = useLocation();\r\n  const product = location.state.product\r\n  const [comments, setComments] = useState([])\r\n  const [user, setUser] = useState('Guest')\r\n  const [inputComment, setInputComment] = useState('')\r\n  const [updateCommentPanel, setUpdateCommentPanel] = useState('')\r\n  const port = process.env.PORT || '9000'\r\n\r\n  useEffect(() => {\r\n    if (JSON.parse(localStorage.getItem('userInfo')) !== null) {\r\n      setUser(JSON.parse(localStorage.getItem('userInfo')).username)\r\n    }\r\n    fetch(`http://192.168.1.113:${port}/comment`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(product),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }).then(response => response.json().then(data => {\r\n      if (data.length) {\r\n        setComments(data)\r\n      }\r\n    }))\r\n  }, [updateCommentPanel])\r\n\r\n  function addComment() {\r\n    let danas = new Date()\r\n    let minutes = danas.getMinutes();\r\n    minutes = minutes > 9 ? minutes : '0' + minutes;\r\n    let date = danas.getFullYear() + '-' + (danas.getMonth() + 1) + '-' + danas.getDate() + ' at ' + danas.getHours() + \":\" + minutes\r\n    let dataComment = {\r\n      productid: product.productid,\r\n      user: user,\r\n      comment: inputComment,\r\n      date: date\r\n    }\r\n    if (inputComment != ''){\r\n    fetch(`http://192.168.1.113:${port}/comment`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(dataComment),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }).then(response => response.json().then(data => {\r\n      if (data.length){\r\n        console.log(data)\r\n        setComments(data)\r\n      }\r\n    }))\r\n  }\r\n  }\r\n  return (\r\n    <>\r\n      <Navbar cartNumber={props.cartNumber} setCartNumber={props.setCartNumber} />\r\n      <div className='productInfo'>\r\n\r\n        <div className='product'>\r\n          <h1>{product.productName}</h1>\r\n          <h2>Current price: {product.productPrice}</h2>\r\n          <img src={require(`../Homepage/ProductShowcase/images/${product.productImage}`)} alt=\"\" />\r\n          <h4>There is curently {product.inStock} of this product in invetory</h4>\r\n        </div>\r\n      </div>\r\n      <div className='comments'>\r\n        <div className='inputButton'>\r\n          <input type=\"text\" onChange={e => { setInputComment(e.target.value) }} />\r\n          <button onClick={addComment}>Insert comment</button>\r\n        </div>\r\n        <div className='commentPanel'>\r\n          <div className='generatedComments'>\r\n            {comments.map(comment => {\r\n              return (<div key={uuidv4()}>\r\n                <div className='flex'>\r\n                <img src={require(`./default.jpg`)} alt=\"\" />    \r\n                <h2>{comment.user}</h2>\r\n                <h4>{comment.date}</h4>\r\n                </div>\r\n                <p>{comment.comment}</p>\r\n              </div>)\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductInfo"]},"metadata":{},"sourceType":"module"}